<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

{# make a "name" variable #}
{% set name=artist.data['name'] %}

<head>
    <title>MusicBrainz Artist: {{ name }}</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="generator" content="Geany 1.22" />
    <!-- TODO: Put this in a style file. -->
    <style>
        div {
            border:1px solid grey;
            padding:1em;
            margin:10px;
            font-family: sans-serif;
            font-size: 0.8em;
        }
    </style>
    <script src="{{ url_for('static', filename='scripts/artist.js') }}" type="text/javascript"></script>
</head>

<body>
    <div id="header"><h1>A Basic Bottled Artist</h1></div>
    <div id="content">
        <h2>{{name}} <span style="font-size:smaller">{{artist.data['disambiguation']}}</span></h2>
        <p id="wp-summary" style="text-align:justify;"></p>
        <script>getWikiText({{artist.wikipedia[0]|tojson|safe}},{{artist.wikipedia[1]|tojson|safe}})</script>
        <table style="width:100%;">
            <tr>
            {% set i = 0 %} {# This would probably be better in JS #}
            {% set rows = 0 %}
            {% for rg in artist.release_groups[''] %}
                    {% set i = i + 1 %}
                    {% if i > 5 %}
                        {% set i = 1 %}
                        {% set rows = rows + 1 %}
                        </tr>
                    {% endif %}

                    {% if rows < 3 %}
                        {% if i == 1 %}
                            <tr>
                        {% endif %}

                        <td style="width:20%;">
                            <img style="display:block; margin-left:auto; margin-right:auto; box-shadow: 8px 8px 4px #888888;" src="http://coverartarchive.org/beta/release-group/{{rg['data']['id']}}/front-250" width="90%" onerror='onImageError("{{ url_for('static', filename='images/') }}", this)'></img>
                            </a>
                    </br>
                            <div style="text-align:center; padding:0; height:3.5em; border:0px; margin:0px">{{rg['data']['title']}}</br>{{rg['year']}}</div>
                       </td>
               {% endif %}
            {% endfor %}
            </tr>
        </table>
    </div>
    <div id="debug">
        <h3>Debug information</h3>
        <h4>Dump as JSON data</h4>
        <p>{{artist.data_string|safe}}</p>
    </div>
    <div id="footer">
        <p>&copy;2012</p>
    </div>
</body>

</html>
